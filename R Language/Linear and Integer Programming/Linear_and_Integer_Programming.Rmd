---
title: "R програм ашиглаж шугаман програмчлалын бодлого бодох"
author: "Г.Махгал"
date: "2018 оны 7 сарын 5"
header-includes:
   - \usepackage[mongolian]{babel}
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Удиртгал

R програмын `lpSolve` багц ашиглаж (бүхэл тоон) шугаман програмчлалын бодлого хэрхэн бодохыг тодорхой жишээ бодлого дээр авч үзнэ. Мөн эх файлаас *R Markdown* ашиглаж RStudio програм дээр R болон \LaTeX\ код бүхий баримт боловсруулахыг харж болно.

## Бодлого

Төмөр хийцийн компани хар болон өнгөт төмөрлөгөөр хоёр төрлийн бүтээгдэхүүнийг токарын болон огтлогч суурь машинд боловсруулж хийдэг. Нэгж бүтээгдэхүүн үйлдвэрлэхэд орох түүхий эдийн орц (килограмм), шаардагдах суурь машины нөөц (машин/цаг), тухайн нэгж бүтээгдэхүүнээс олох орлого (төгрөг) зэрэг мэдээллийг хүснэгтэлж өгөв.

: Нэгж бүтээгдэхүүнд орох орцын норм, түүхий эдийн нөөц болон нэгж бүтээгдэхүүнээс олох орлого

| Түүхий эд                | А төрөл |  В төрөл | Hөөц |
| :-------                 | ------: |  ------: | ---: |
| хар төмөрлөг, кг         |      11 |       75 | 5700 |
| өнгөт төмөрлөг, кг       |      25 |       50 | 4200 |
| токарын суурь машин, м/ц |      30 |       40 | 5600 |
| огтлогч суурь машин, м/ц |      20 |       10 | 3400 |
| орлого, төг              |   32500 |    72000 |      |

Бүтээгдэхүүний төрөл бүрээс хэдийг үйлдвэрлэвэл компани хамгийн их орлого олох вэ?

## Бодолт

Зорилгын функц буюу орлогын хэмжээ
$$f(x)=32500x_1+72000x_2$$
байна. Энд $x_i$ бүтээгдэхүүний тоо ширхэг юм. Орцын норм болон нөөц зэрэг мэдээлэлд үндэслэн зааглалтын нөхцөл олж бичвэл
$$
\left\{
\begin{array}{lcr}
11x_1+75x_2 & \leq & 5700 \\
25x_1+50x_2 & \leq & 4200 \\
30x_1+40x_2 & \leq & 5600 \\
20x_1+10x_2 & \leq & 3400 \\
\end{array}
\right.
$$
байна. Хэрэв
$$A=\left[
\begin{array}{rr}
11 & 75 \\
25 & 50 \\
30 & 40 \\
20 & 10 \\
\end{array}
\right]\qquad b=\left[
\begin{array}{r}
5700 \\
4200 \\
5600 \\
3400 \\
\end{array}
\right]\qquad x=\left[
\begin{array}{r}
x_1 \\ x_2
\end{array}
\right]$$
гэвэл зааглалтыг
$$Ax=b$$
матриц хэлбэртэй бичиж болно.

Иймд байдлаар уг бодлого
$$
\begin{array}{l}
\max\ 32500x_1+72000x_2 \\[1ex]
\hphantom{\max}
\begin{array}{l}
11x_1+75x_2\leq5700 \\
25x_1+50x_2\leq4200 \\
30x_1+40x_2\leq5600 \\
20x_1+10x_2\leq3400 \\
\end{array}
\end{array}
$$
хэлбэртэй шугаман програмчлалын бодлогод хүрч байна.

> Энд хувьсагч буюу бүтээгдэхүүний хэмжээ нь ширхэгээр яригдах тул бүхэл тоон програмчлал буюу `int.vec` (бүхэл хувьсагчдын индекс дугаарыг вектор байдлаар өгөх) эсвэл `all.int = TRUE` (бүх хувьсагч бүхэл) аргумент ашиглах шаардлагатай.

Бодлогыг R програм ашиглаж бодохын тулд дараах код бичнэ.

```{r lpSolve}
res <- lpSolve::lp(
  direction = "max",
  # зорилго, орлогын хэмжээг максимумчлах
  objective.in = c(32500, 72000),
  # зорилгын функцийн коэффициент, нэгж бүтээгдэхүүнээс олох орлого, бүтээгдэхүүн бүрээр
  const.mat = matrix(data = c(11, 75, 25, 50, 30, 40, 20, 10), nrow = 4, byrow = TRUE),
  # зааглалтын матриц, орцын норм
  const.dir = c("<="),
  # зааглалт, бүгд адил <= хэлбэртэй
  const.rhs = c(5700, 4200, 5600, 3400),
  # зааглалтын вектор, нөөцийн хэмжээ хязгаар
  int.vec = 1:2
  # бүхэл утгатай хувьсагчид, бүтээгдэхүүний тоо ширхэг, эсвэл all.int = TRUE
)
```

Энд ашигласан `lpSolve::lp` функцийн талаар дэлгэрэнгүй мэдээлэл авахыг хүсвэл R програм дээр дараах тушаал өгнө.
```{r lpSolve_documentation, eval=FALSE, include=TRUE}
?lpSolve::lp
```

Одоо бодолтын үр дүнг авч үзье.

* Шийд олсон эсэх
```{r}
if (res$status == 0) print("олсон") else print("олоогүй")
```
* Шийдийн тоо
```{r}
res$num.bin.solns
```
* Шийд буюу бүтээгдэхүүн тус бүрийг үйлдвэрлэх хэмжээ (тоо ширхэг)
```{r}
res$solution
```
* Зорилгын функцийн утга
```{r}
res$objval
```

Мөн уг функцийн үр дүнд зорилгын функцийн коэффициент болон зааглалт зэрэг нэмэлт мэдээлэл хадгалсан байдаг.

```{r}
res$objective
res$constraints
```

## Шийд

Дээрх үр дүнгээс харвал
```{r echo=FALSE}
res$solution
```
шийд оллоо.
